"use strict";(("undefined"!=typeof self?self:this).webpackChunkUePage=("undefined"!=typeof self?self:this).webpackChunkUePage||[]).push([[603],{8603:(e,t,r)=>{r.r(t),r.d(t,{dealFormMessage:()=>s});r(9375),r(2438),r(2266),r(9819),r(7327);var n=r(403),o=r(4651);const c={"zh-CN":{REQUIRE_ERR_MSG:"此项不能为空",NUMBER_ERR_MSG:"只能输入数字",EMAIL_ERR_MSG:"请输入正确的邮箱",PHONE_ERR_MSG:"请输入正确的手机号",DATE_ERR_MSG:"请输入正确的时间，格式为 2018-09-10 或者 2018-09-10 21:09",CHECK_FORM:"请检查表单后重新提交",SUCCESS:"提交成功",ERROR:"提交失败，出现未知错误",AGREEMENT_ERR_MSG:"请阅读并同意协议",CODE:"验证码"},"en-US":{REQUIRE_ERR_MSG:"This item cannot be empty",NUMBER_ERR_MSG:"Only numbers can be entered",EMAIL_ERR_MSG:"Please enter the correct email",PHONE_ERR_MSG:"Please enter the correct mobile phone number",DATE_ERR_MSG:"Please enter the correct time, the format is 2018-09-10 or 2018-09-10 21:09",CHECK_FORM:"Please check the form and submit it again",SUCCESS:"Submitted successfully",ERROR:"Submission failed, unknown error",AGREEMENT_ERR_MSG:"Please read and agree to the agreement",CODE:"Verification code"}},i={require:{test:/\S+/,errMsg:"REQUIRE_ERR_MSG"},agreement:{test:/\S+/,errMsg:"AGREEMENT_ERR_MSG"},number:{test:/^[0-9]+$/,errMsg:"NUMBER_ERR_MSG"},email:{test:/^\w+((.\w+)|(-\w+))@[A-Za-z0-9]+((.|-)[A-Za-z0-9]+).[A-Za-z0-9]+$/,errMsg:"EMAIL_ERR_MSG"},phone:{test:/^[1][3,4,5,7,8][0-9]{9}$/,errMsg:"PHONE_ERR_MSG"},date:{test:/^[0-9]{4}-[0-9]{2}-[0-9]{2}(\s[0-9]{2}:[0-9]{2})?$/,errMsg:"DATE_ERR_MSG"}};function s(e,t={}){const r=o(e).find("."+n.A["form-code-img"]),s=r.attr("src"),a=Object.assign({getCodeImgUrl:()=>"",formSubmit:(e,t,r)=>Promise.resolve()},t),l=t.lang||"zh-CN",d=c[l]||c["zh-CN"],f=o(`.${n.A["form-row"]}[data-type="code"]`).find(`.${n.A["form-row_name"]}`),R=f.text();function m(){const e=a.getCodeImgUrl();e&&r.attr("src",e)}f.text("验证码"===R?d.CODE:R),m(),o(e).find(`.${n.A["form-code-img"]}`).on("click",m);const E=o(e).find("."+n.A["form-row"]),u=o(e).find("."+n.A["submit-btn"]),p=o(e).find("."+n.A["form-row--submit"]),g=n.A["form-msg"];function h(e,t){const r=o(e).find("."+g),{msg:n,type:c}=t;n&&r.length?r.text(n):!n||r.length||o(`<div class="${g}" data-type="${c}">${n}</div>`).appendTo(e)}function _(){o(e).find("."+g).remove()}function M(){_(),S();let e=!0;return E.each((function(t,r){const n=o(r).find("input,select,textarea");if(!n?.length)return;let c="";const s=function(e){let t="";return t="checkbox"===e.eq(0).attr("type")?String(e.filter("input[type='checkbox']:checked").val()||""):"radio"===e.eq(0).attr("type")?String(e.filter("input[type='radio']:checked").val()||""):(e.val()||"").toString().trim(),t}(n),a=o(r).data("ruler")?.split(",");a.includes("require")&&o(a).each((function(t,n){if(i[n]){i[n].test.test(s.trim())||(e=!1,c=d[i[n].errMsg])}t==a.length-1&&c.length&&h(r,{type:"warn",msg:c})}))})),e}function S(e){e?p.attr("data-status",e):p.removeAttr("data-status")}let b=!1;return u.on("click",(()=>{if(b)return;if(!M())return void h(p[0],{type:"warn",msg:d.CHECK_FORM});S("loading");const t=o(e).serializeArray();a.formSubmit(t,function(e){const t={code:"",type:"",content:"<style>table{border-right:#cccccc 1px solid;border-bottom:#cccccc 1px solid;}tr{ margin:0; padding:0}td,th{ border-left:#cccccc 1px solid;border-top:#cccccc 1px solid; margin:0; padding:0 10px; font-size:14px; background:#f8f8f8; color:#666; line-height:30px}</style>"};if("object"!=typeof e)return t;const r={};e.forEach((e=>{const t=e.name;t in r?r[t].value.push(e.value):r[t]={name:t,value:[e.value]}})),t.content+='<table width="600" border="0" cellspacing="0"> <tbody>';for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e)){const n=r[e];"code"==n.name?t.code=n.value[0]:"type"==n.name?t.type=n.value[0]:t.content+="<tr><th>"+n.name+"</th><td>"+(n.value?.toString()||"")+"</td></tr>"}return t.content+="</tbody> </table>",t.content+='<p style="color:#666; font-size:12px">来自&nbsp;&nbsp;'+window.location.host+"</p>",t}(t),{formName:o(e).attr("data-name")||""}).then((()=>{h(p[0],{type:"success",msg:d.SUCCESS}),S("success")}),(e=>{S("error"),h(p[0],{type:"warn",msg:e||d.ERROR})})).finally((()=>{b=!1,m()}))})),{destroy(){b=!1,S(),_(),r.attr("src",s||""),o(e).find(n.A["form-code-img"]).off("click"),u.off("click")}}}}}]);